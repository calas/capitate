#!/usr/bin/env ruby

begin
  require 'capitate'
rescue LoadError
  require 'rubygems'
  require 'capitate'  
end

require 'capistrano/cli'

cli = Capistrano::CLI.new(ARGV)
cli.parse_options!

config = cli.instantiate_configuration
config.logger.level = cli.options[:verbose]

cli.set_pre_vars(config)
cli.load_recipes(config)

config.load do 
  require 'capitate/recipes'
end

config.trigger(:load)
cli.execute_requested_actions(config)
config.trigger(:exit)



